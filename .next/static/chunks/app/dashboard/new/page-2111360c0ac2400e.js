(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[816],{6561:(e,i,s)=>{Promise.resolve().then(s.bind(s,7458))},7458:(e,i,s)=>{"use strict";s.r(i),s.d(i,{default:()=>m});var r=s(5155),l=s(2115),a=s(5695),t=s(588),o=s(285),n=s(6695),d=s(2523),c=s(6671),u=s(6337);function m(){let{session:e}=(0,u._)(),i=(0,a.useRouter)(),[s,m]=l.useState(null),[f,p]=l.useState(!1),[x,h]=l.useState(null);l.useEffect(()=>{e||i.push("/login")},[e,i]);let b=async e=>{if(e.preventDefault(),!s)return void c.o.error("Please select a file to transcribe");if(s.size>0x1900000)return void c.o.error("File size exceeds the limit (25MB)");if(!["audio/mpeg","audio/mp4","audio/wav","audio/ogg","audio/flac","video/mp4","video/quicktime","video/mpeg","video/webm","video/ogg"].includes(s.type))return void c.o.error("Unsupported file type. Please upload an audio or video file.");try{p(!0),h(null);let e=new FormData;e.append("file",s);let i=await fetch("/api/transcribe",{method:"POST",body:e}),r=await i.json();if(!i.ok)throw Error(r.error||"Failed to transcribe file");h(r.transcription),c.o.success("Transcription completed successfully!")}catch(e){console.error("Upload error:",e),c.o.error("Failed to transcribe file. Please try again.")}finally{p(!1)}};return(0,r.jsx)(t.O,{children:(0,r.jsxs)("div",{className:"container py-10",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold",children:"New Transcription"}),(0,r.jsx)(o.$,{onClick:()=>i.push("/dashboard"),variant:"outline",children:"Back to Dashboard"})]}),(0,r.jsxs)(n.Zp,{className:"max-w-2xl mx-auto",children:[(0,r.jsxs)(n.aR,{children:[(0,r.jsx)(n.ZB,{children:"Upload Audio or Video"}),(0,r.jsx)(n.BT,{children:"Supported formats: MP3, M4A, MP4, WAV, OGG, FLAC, WEBM, and more"})]}),(0,r.jsx)(n.Wu,{children:(0,r.jsxs)("form",{onSubmit:b,className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,r.jsx)("label",{htmlFor:"file",className:"text-sm font-medium",children:"File"}),(0,r.jsx)(d.p,{id:"file",type:"file",accept:"audio/*,video/*",onChange:e=>{e.target.files&&e.target.files[0]&&m(e.target.files[0])},disabled:f}),(0,r.jsx)("div",{className:"text-xs text-muted-foreground",children:"Maximum file size: 25MB"})]}),(0,r.jsx)(o.$,{type:"submit",className:"w-full",disabled:!s||f,children:f?"Transcribing...":"Transcribe"})]})}),x&&(0,r.jsxs)(n.wL,{className:"flex flex-col",children:[(0,r.jsx)("h3",{className:"font-medium mb-2",children:"Transcription Result:"}),(0,r.jsx)("div",{className:"p-4 border rounded-md w-full bg-muted whitespace-pre-wrap",children:x}),(0,r.jsxs)("div",{className:"flex gap-2 mt-4 self-end",children:[(0,r.jsx)(o.$,{variant:"outline",onClick:()=>navigator.clipboard.writeText(x),children:"Copy"}),(0,r.jsx)(o.$,{onClick:()=>h(null),children:"New Transcription"})]})]})]})]})})}}},e=>{var i=i=>e(e.s=i);e.O(0,[711,105,973,874,514,667,108,441,684,358],()=>i(6561)),_N_E=e.O()}]);